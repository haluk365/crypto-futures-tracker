<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Binance Futures Ã‡oklu TakipÃ§i</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            min-height: 100vh;
            padding: 2rem;
            color: white;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        .header {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 2rem;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.2);
            margin-bottom: 2rem;
            text-align: center;
        }

        h1 {
            margin-bottom: 1.5rem;
            font-size: 2.5rem;
            background: linear-gradient(45deg, #ffd700, #ffed4e);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .add-coin {
            display: flex;
            gap: 10px;
            max-width: 400px;
            margin: 0 auto;
        }

        input {
            flex: 1;
            padding: 12px;
            border: none;
            border-radius: 10px;
            background: rgba(255, 255, 255, 0.2);
            color: white;
            font-size: 16px;
            backdrop-filter: blur(5px);
        }

        input::placeholder {
            color: rgba(255, 255, 255, 0.7);
        }

        input:focus {
            outline: none;
            background: rgba(255, 255, 255, 0.3);
        }

        button {
            padding: 12px 24px;
            border: none;
            border-radius: 10px;
            background: linear-gradient(45deg, #ff6b6b, #ee5a24);
            color: white;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: bold;
        }

        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(238, 90, 36, 0.4);
        }

        .remove-btn {
            background: linear-gradient(45deg, #ff4757, #c44569);
            padding: 5px 10px;
            font-size: 12px;
            margin-left: 10px;
        }

        .coins-table-container {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 1.5rem;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.2);
            overflow-x: auto;
        }

        .coins-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 0.95rem;
        }

        .coins-table th {
            background: rgba(255, 255, 255, 0.1);
            padding: 1rem 0.75rem;
            text-align: left;
            font-weight: bold;
            color: #ffd700;
            border-bottom: 2px solid rgba(255, 255, 255, 0.2);
            white-space: nowrap;
        }

        .coins-table td {
            padding: 1rem 0.75rem;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            vertical-align: middle;
        }

        .coins-table tr:hover {
            background: rgba(255, 255, 255, 0.05);
        }

        .coin-name {
            font-size: 1.1rem;
            font-weight: bold;
            color: #ffd700;
        }

        .status {
            padding: 4px 8px;
            border-radius: 6px;
            font-size: 11px;
            font-weight: bold;
            text-align: center;
            min-width: 60px;
            display: inline-block;
        }

        .status.connected {
            background: rgba(0, 255, 136, 0.2);
            color: #00ff88;
        }

        .status.disconnected {
            background: rgba(255, 71, 87, 0.2);
            color: #ff4757;
        }

        .status.connecting {
            background: rgba(255, 215, 0, 0.2);
            color: #ffd700;
        }

        .price {
            font-size: 1.3rem;
            font-weight: bold;
            font-family: 'Courier New', monospace;
        }

        .price.up {
            color: #00ff88;
            animation: pulse-green 0.5s ease-in-out;
        }

        .price.down {
            color: #ff4757;
            animation: pulse-red 0.5s ease-in-out;
        }

        .change-positive {
            color: #00ff88;
            font-weight: bold;
        }

        .change-negative {
            color: #ff4757;
            font-weight: bold;
        }

        .remove-btn {
            background: linear-gradient(45deg, #ff4757, #c44569);
            padding: 6px 12px;
            font-size: 11px;
            border: none;
            border-radius: 6px;
            color: white;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
        }

        .remove-btn:hover {
            transform: translateY(-1px);
            box-shadow: 0 2px 8px rgba(255, 71, 87, 0.4);
        }

        .numeric-cell {
            text-align: right;
            font-family: 'Courier New', monospace;
        }

        @keyframes pulse-green {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); color: #00ff88; }
            100% { transform: scale(1); }
        }

        @keyframes pulse-red {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); color: #ff4757; }
            100% { transform: scale(1); }
        }

        .no-coins {
            text-align: center;
            padding: 3rem;
            opacity: 0.7;
            font-size: 1.2rem;
        }

        @media (max-width: 768px) {
            body {
                padding: 1rem;
            }

            h1 {
                font-size: 2rem;
            }

            .coins-grid {
                grid-template-columns: 1fr;
            }

            .add-coin {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ðŸš€ Binance Futures Ã‡oklu TakipÃ§i</h1>
            
            <div class="add-coin">
                <input type="text" id="coinInput" placeholder="Coin adÄ± (Ã¶rn: BTC)" value="">
                <button id="addBtn">Ekle</button>
            </div>
        </div>

        <div class="coins-table-container" id="coinsContainer">
            <div class="no-coins">
                Takip etmek istediÄŸiniz coinleri yukarÄ±dan ekleyin
            </div>
        </div>
    </div>

    <script>
        let futuresSymbols = [];
        let trackedCoins = {};

        const coinInput = document.getElementById('coinInput');
        const addBtn = document.getElementById('addBtn');
        const coinsContainer = document.getElementById('coinsContainer');

        // Binance Futures'da mevcut olan coinleri al
        async function loadFuturesSymbols() {
            try {
                const response = await fetch('https://fapi.binance.com/fapi/v1/exchangeInfo');
                const data = await response.json();
                futuresSymbols = data.symbols
                    .filter(symbol => symbol.status === 'TRADING')
                    .map(symbol => symbol.symbol);
                console.log(`${futuresSymbols.length} adet Futures coin yÃ¼klendi`);
            } catch (error) {
                console.error('Futures coin listesi alÄ±namadÄ±:', error);
            }
        }

        function validateSymbol(symbol) {
            if (futuresSymbols.length === 0) {
                return true;
            }
            return futuresSymbols.includes(symbol);
        }

        function formatNumber(num) {
            if (num >= 1000000) {
                return (num / 1000000).toFixed(2) + 'M';
            } else if (num >= 1000) {
                return (num / 1000).toFixed(2) + 'K';
            }
            return parseFloat(num).toFixed(2);
        }

        function formatPrice(price) {
            const num = parseFloat(price);
            if (num >= 1) {
                return '$' + num.toFixed(2);
            } else if (num >= 0.01) {
                return '$' + num.toFixed(4);
            } else {
                return '$' + num.toFixed(8);
            }
        }

        function createCoinsTable() {
            const table = document.createElement('table');
            table.className = 'coins-table';
            
            table.innerHTML = `
                <thead>
                    <tr>
                        <th>Coin</th>
                        <th>Durum</th>
                        <th>Fiyat</th>
                        <th>24s DeÄŸiÅŸim</th>
                        <th>24s YÃ¼ksek</th>
                        <th>24s DÃ¼ÅŸÃ¼k</th>
                        <th>Hacim</th>
                        <th>Son GÃ¼ncelleme</th>
                        <th>Ä°ÅŸlem</th>
                    </tr>
                </thead>
                <tbody id="coinsTableBody">
                </tbody>
            `;
            
            return table;
        }

        function createCoinRow(symbol) {
            const row = document.createElement('tr');
            row.id = `row-${symbol}`;
            
            row.innerHTML = `
                <td>
                    <div class="coin-name">${symbol}</div>
                </td>
                <td>
                    <span class="status connecting" id="status-${symbol}">BaÄŸlanÄ±yor...</span>
                </td>
                <td class="numeric-cell">
                    <div class="price" id="price-${symbol}">$0.00</div>
                </td>
                <td class="numeric-cell" id="change-${symbol}">-</td>
                <td class="numeric-cell" id="high-${symbol}">-</td>
                <td class="numeric-cell" id="low-${symbol}">-</td>
                <td class="numeric-cell" id="volume-${symbol}">-</td>
                <td class="numeric-cell" id="update-${symbol}">-</td>
                <td>
                    <button class="remove-btn" onclick="removeCoin('${symbol}')">KaldÄ±r</button>
                </td>
            `;
            
            return row;
        }

        function updateCoinStatus(symbol, message, type) {
            const statusElement = document.getElementById(`status-${symbol}`);
            if (statusElement) {
                statusElement.textContent = message;
                statusElement.className = `status ${type}`;
            }
        }

        function connectCoinWebSocket(symbol) {
            const wsUrl = `wss://fstream.binance.com/ws/${symbol.toLowerCase()}@ticker`;
            const ws = new WebSocket(wsUrl);

            trackedCoins[symbol].ws = ws;
            trackedCoins[symbol].lastPrice = 0;

            ws.onopen = function() {
                updateCoinStatus(symbol, 'BaÄŸlÄ±', 'connected');
            };

            ws.onmessage = function(event) {
                try {
                    const data = JSON.parse(event.data);
                    updateCoinData(symbol, data);
                } catch (error) {
                    console.error(`${symbol} veri iÅŸleme hatasÄ±:`, error);
                }
            };

            ws.onerror = function(error) {
                console.error(`${symbol} WebSocket hatasÄ±:`, error);
                updateCoinStatus(symbol, 'Hata', 'disconnected');
            };

            ws.onclose = function() {
                updateCoinStatus(symbol, 'Kesildi', 'disconnected');
            };
        }

        function updateCoinData(symbol, data) {
            const currentPrice = parseFloat(data.c);
            const change24h = parseFloat(data.P);
            const changeAmount = parseFloat(data.p);
            const lastPrice = trackedCoins[symbol].lastPrice;

            // Fiyat elementi
            const priceElement = document.getElementById(`price-${symbol}`);
            if (priceElement) {
                priceElement.className = 'price';
                if (currentPrice > lastPrice) {
                    priceElement.classList.add('up');
                } else if (currentPrice < lastPrice) {
                    priceElement.classList.add('down');
                }
                priceElement.textContent = formatPrice(data.c);
            }

            // DeÄŸiÅŸim yÃ¼zdesi
            const changeElement = document.getElementById(`change-${symbol}`);
            if (changeElement) {
                const changeText = `${change24h >= 0 ? '+' : ''}${change24h.toFixed(2)}% (${changeAmount >= 0 ? '+' : ''}${formatPrice(changeAmount)})`;
                changeElement.textContent = changeText;
                changeElement.className = `numeric-cell ${change24h >= 0 ? 'change-positive' : 'change-negative'}`;
            }

            // Ä°statistikler
            const highElement = document.getElementById(`high-${symbol}`);
            const lowElement = document.getElementById(`low-${symbol}`);
            const volumeElement = document.getElementById(`volume-${symbol}`);
            const updateElement = document.getElementById(`update-${symbol}`);

            if (highElement) highElement.textContent = formatPrice(data.h);
            if (lowElement) lowElement.textContent = formatPrice(data.l);
            if (volumeElement) volumeElement.textContent = formatNumber(data.v);
            if (updateElement) {
                const now = new Date();
                updateElement.textContent = now.toLocaleTimeString('tr-TR');
            }

            trackedCoins[symbol].lastPrice = currentPrice;
        }

        function addCoin() {
            let symbol = coinInput.value.trim().toUpperCase();
            
            if (!symbol) {
                alert('LÃ¼tfen bir coin adÄ± girin!');
                return;
            }

            // Otomatik olarak USDT ekle
            if (!symbol.endsWith('USDT')) {
                symbol = symbol + 'USDT';
            }

            // Zaten takip ediliyor mu kontrol et
            if (trackedCoins[symbol]) {
                alert(`${symbol} zaten takip ediliyor!`);
                return;
            }

            // Futures'da mevcut mu kontrol et
            if (!validateSymbol(symbol)) {
                alert(`${symbol} Binance Futures'da bulunamadÄ±!`);
                return;
            }

            // Coin'i ekle
            trackedCoins[symbol] = {
                ws: null,
                lastPrice: 0
            };

            // UI'yi gÃ¼ncelle
            updateUI();

            // WebSocket baÄŸlantÄ±sÄ±nÄ± kur
            connectCoinWebSocket(symbol);

            // Input'u temizle
            coinInput.value = '';
        }

        function removeCoin(symbol) {
            if (trackedCoins[symbol]) {
                // WebSocket baÄŸlantÄ±sÄ±nÄ± kapat
                if (trackedCoins[symbol].ws) {
                    trackedCoins[symbol].ws.close();
                }
                
                // Takip listesinden Ã§Ä±kar
                delete trackedCoins[symbol];
                
                // UI'yi gÃ¼ncelle
                updateUI();
            }
        }

        function updateUI() {
            const noCoinsDiv = coinsContainer.querySelector('.no-coins');
            
            if (Object.keys(trackedCoins).length === 0) {
                // HiÃ§ coin yoksa "no-coins" mesajÄ±nÄ± gÃ¶ster
                if (!noCoinsDiv) {
                    coinsContainer.innerHTML = '<div class="no-coins">Takip etmek istediÄŸiniz coinleri yukarÄ±dan ekleyin</div>';
                }
            } else {
                // Coinler varsa tabloyu oluÅŸtur
                if (noCoinsDiv) {
                    coinsContainer.innerHTML = '';
                    const table = createCoinsTable();
                    coinsContainer.appendChild(table);
                }
                
                const tableBody = document.getElementById('coinsTableBody');
                if (tableBody) {
                    // Mevcut satÄ±rlarÄ± kontrol et ve eksikleri ekle
                    Object.keys(trackedCoins).forEach(symbol => {
                        if (!document.getElementById(`row-${symbol}`)) {
                            const row = createCoinRow(symbol);
                            tableBody.appendChild(row);
                        }
                    });
                    
                    // SilinmiÅŸ satÄ±rlarÄ± kaldÄ±r
                    const existingRows = tableBody.querySelectorAll('tr');
                    existingRows.forEach(row => {
                        const symbol = row.id.replace('row-', '');
                        if (!trackedCoins[symbol]) {
                            row.remove();
                        }
                    });
                }
            }
        }

        // Event listeners
        addBtn.addEventListener('click', addCoin);
        
        coinInput.addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                addCoin();
            }
        });

        // Sayfa yÃ¼klendiÄŸinde
        window.addEventListener('load', function() {
            loadFuturesSymbols();
        });

        // Sayfa kapanÄ±rken tÃ¼m WebSocket baÄŸlantÄ±larÄ±nÄ± kapat
        window.addEventListener('beforeunload', function() {
            Object.values(trackedCoins).forEach(coin => {
                if (coin.ws) {
                    coin.ws.close();
                }
            });
        });

        // Global fonksiyon (remove butonlarÄ± iÃ§in)
        window.removeCoin = removeCoin;
    </script>
</body>
</html>
